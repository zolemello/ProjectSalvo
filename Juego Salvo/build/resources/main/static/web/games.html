<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Salvo Games</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body>
<header > 
    <div class="titulo"><h2>Games Info</h2></div>
</header>
<section>
    <div id="app" class="p-4">

       <div class="container-fluid">
<!--LOGIN -->
            <div id="loginBlock" class="row">

                <div class="col-sm-12">
                    <div class="col-sm-4">
					 <div class="container">
            <form id="login-form" onsubmit="return false">
               <p> <label for="inputUserName">Username:</label><input type="email" id="inputUserName" name="username"></p>
			   <p> <label for="inputPassword">Password:</label><input type="password" id="inputPassword" name="password"></p>
<button id="loginbtn" type="submit" class="form-control submitbutton btn btn-info">Log in</button>		
		<p> Dont  have an account? Create one here: 
<button  id="signupbtn" type="submit" class="form-control submitbutton btn btn-info"> Sign Up</button>	
			</p>
            </form>

            <form class="logOut" id="logout-form-main" onsubmit="return false">
                <p class="user-logged-in" id="user-logged-in-main"></p>
<button id="logoutbtn"type="submit" class="form-control submitbutton btn btn-info">Log Out</button>            </form>
        </div>
              </div>
         </div>
            </div>
</div>




		</div>
    
	

	<!-- LEADERBOARD -->

    <div class="row">
        <div class="col-12 pb-5">
            <div class="titulo"> <h2>LeaderBoard</h2></div>
        </div>
        <div class="col-12 pb-5">
            <table class="leaderboard table table-sm table-bordered table-striped text-center">
                <tr class="table-dark">
                    <th>Name</th>
                    <th>Won</th>
                    <th>Tie</th>
                    <th>Lose</th>
                    <th>Points</th>
                </tr>
                <tr v-for="h in leaderboard">
                    <td>{{ h.username }}</td>
                    <td>{{ h.won }}</td>
                    <td>{{ h.tie }}</td>
                    <td>{{ h.lose }}</td>
                    <td>{{ h.total }}</td>
                </tr>
            </table>
        </div>
    </div>


<!--GAME LIST -->
        <div class="col-12 pb-5">
            <div class="titulo"> <h2>Game List</h2></div>
            </div>
            <ul class="games-list">
		<!-- Boton para crear un juego --> <p> <h5> Join a game below or create a new one here:   <button type="button" class="btn btn-info" @click="createGame()">New Game</button> </h5> </p>

                <li v-for="game in games" class="pt-2">Game no. {{game.id}} created on {{game.creation}}
                   <p>Players:</p>
                   <ul>
                      <li v-for="i in game.gamePlayer">{{i.player.username}}</li>
                   </ul>
                </li>
				
				<!-- JOIN GAME -->
				<template v-for="gamePlayer in game.gamePlayers">
                            <template v-if="player != 'guest'">
                                <template v-if="gamePlayer.player.id == player.id"> <!--si ya estaba en un juego, que entre-->
                                    <a class="btn btn-info" :href="'/web/game.html?gp='+gamePlayer.id">Enter Game</a>

                                </template>
                                <template v-else-if="game.gamePlayers.length == 1"> <!--si hay un jugador, que se una-->
                                    <button class="btn btn-info" @click="joinGame(game.id)">Join Game</button>
                                </template>
                            </template>
                        </template>
                    
					
             </ul>

    </div>
</section>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="games.js"></script>
</body>
</html>